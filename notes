export PATH=$PATH:/opt/altera/quartus/bin
export PATH=$PATH:/opt/altera/modelsim_ase/linux
export LD_LIBRARY_PATH=/opt/altera/modelsim_ase/lib32
export LM_LICENSE_FILE=7195@cadlic0.stanford.edu
export QUARTUS_64BIT=1
source ~/power_estimate_eg/plasticine/scripts/CU_power_area_estimate/setup/source.sh
# for maxeler and modelsim
source /opt/maxcompiler/settings.sh
export PATH=$PATH:/opt/maxcompiler/bin
export MTI_VCO_MODE=32
export MODELSIMDIR=/opt/altera/modelsim_ase
export MODELSIM=/opt/altera/modelsim_ase/modelsim.ini
export PATH=$MODELSIMDIR/linux:$PATH


more notes:
     [java] Fri 16:17: WARNING: Actual stream clock (150.0MHz) is different from specified stream clock (100.0MHz)!
would this be a potential problem?
todo's:
1. DRAMSIM2
	- is the ns time really needed? (high, easy to do)
	- how are we generating the clock tickings?
	- multikernel thing to fix
		- try dotproduct apps
3. altera:
	- see if it is possble to take the compile results from maxj
	- try to only get hdl files and synthesize using the gui (high priority)
		- try utilizing the generated reports from altera (medium)
4. CACTI:
	- how would the power / area change according to different words / size
5. generate verilog for CU (medium, can be done quick)
	- ASIC to dramsim2?
2. get the simulation working (medium and paused, hard to do)
	- why freezing? possiblity something wrong with the modelsim library. Should I try the downloaded version?
7. function codegen unit tests

freezing follow-up:
Buildfile: /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/SimpleHDLSimRunner_run.xml

build:

clean:
   	[delete] Deleting directory /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/dist

build:
	[mkdir] Created dir: /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/dist
	[mkdir] Created dir: /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/dist/bin
	[copy] Copying 1 file to /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/dist/bin
	[maxjcompiler] 
	[maxjcompiler] 
	[maxjcompiler] Compiling to folder /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/dist/bin

	all:

	run:
	[java] Sat 20:59: MaxCompiler version: 2014.1
	[java] Sat 20:59: Build "SimpleHDLSim" start time: Sat Aug 06 20:59:05 PDT 2016
	[java] Sat 20:59: Main build process running as user tianzhao on host london
	[java] Sat 20:59: Build location: /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/./SimpleHDLSim_MAIA_HDL_SIM
	[java] Sat 20:59: Detailed build log available in "_build.log"
	[java] Sat 20:59: 
	[java] Sat 20:59: ENGINE BUILD PARAMETERS
	[java] Sat 20:59: 	 Build name: SimpleHDLSim_MAIA_HDL_SIM
	[java] Sat 20:59: 	   DFEModel: MAIA                     
															      	[java] Sat 20:59: 	maxFileName: SimpleHDLSim             
	[java] Sat 20:59: 	     target: HDL_SIM                  
	[java] Sat 20:59: 	 enableMPCX: false                    
	[java] Sat 20:59: WARNING: Actual stream clock (150.0MHz) is different from specified stream clock (100.0MHz)!
	[java] Sat 20:59: Generating input files (VHDL, netlists, MegaWizard/CoreGen)
	[java] Sat 20:59: ERROR: ----------------------------
	[java] Sat 20:59: ERROR: Exception in thread "main":
	[java] Sat 20:59: ERROR:  
	[java] Sat 20:59: ERROR:   Error running external tool :-
	[java] Sat 20:59: ERROR:   Problem            : Error running Altera MegaWizard: Command failed with exit code: 2
	[java] Sat 20:59: ERROR:   Program log        : /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/SimpleHDLSim_MAIA_HDL_SIM/scratch/max4maiafpga/MWAltClkCtrl_quartusv13_1_0_AUTO_numclk_1_ena/qmegawiz.log
	[java] Sat 20:59: ERROR:   Command run        : export LM_LICENSE_FILE="$LM_LICENSE_FILE:$MAXCOMPILERDIR/lib/MaxCompilerQuartusLicense.dat" ;  qmegawiz --64bit -silent module=altclkctrl -f:MWAltClkCtrl_quartusv13_1_0_AUTO_numclk_1_ena.txt MWAltClkCtrl_quartusv13_1_0_AUTO_numclk_1_ena.vhd > qmegawiz.log
	[java] Sat 20:59: ERROR:   Directory run in   : /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/./SimpleHDLSim_MAIA_HDL_SIM/scratch/max4maiafpga/./MWAltClkCtrl_quartusv13_1_0_AUTO_numclk_1_ena
	[java] Sat 20:59: ERROR:   Exit code          : 2
	[java] Sat 20:59: ERROR:   Detailed build log : /local/ssd/home/tianzhao/examples/maxcompiler-manager-tutorial/examples/manager-chap05-example01-simplehdl/EngineCode/./SimpleHDLSim_MAIA_HDL_SIM/scratch/max4maiafpga/_build.log
	[java] Sat 20:59: ERROR: 
	[java] Sat 20:59: ERROR: Exception Stack Trace com.maxeler.maxdc.proc_management.ProcessFailedException: 
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.altera.megawiz.MegawizComponent$1MWCompletionCallback.complete(MegawizComponent.java:142)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.proc_management.ProcResult.<init>(ProcResult.java:88)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.proc_management.ProcAsyncLocal.doWaitForCompletion(ProcAsyncLocal.java:138)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.proc_management.ProcAsync.waitForCompletion(ProcAsync.java:54)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.proc_management.ProcSpec.runLocal(ProcSpec.java:333)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.proc_management.ProcSpec.runAsync(ProcSpec.java:363)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.altera.megawiz.MegawizComponent.run(MegawizComponent.java:279)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.altera.megawiz.MegawizComponent.implement(MegawizComponent.java:303)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.EntityBuilder.buildPass1_FinalizeAndImplementEntityBlackBox(EntityBuilder.java:121)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.EntityBuilder.build(EntityBuilder.java:208)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.BuildManager.buildEntity(BuildManager.java:1387)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.BuildManager.build(BuildManager.java:1587)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxdc.EntityMaxDCDesign.<init>(EntityMaxDCDesign.java:60)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxcompiler.v2.managers.custom.HDLTestBench.buildSubDesign(HDLTestBench.java:1050)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxcompiler.v2.managers.custom._ManagerSimulator.runTest(_ManagerSimulator.java:102)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxcompiler.v2.managers.custom._ManagerSimulator.runTest(_ManagerSimulator.java:90)
	[java] Sat 20:59: ERROR:    at com.maxeler.maxcompiler.v2.managers.custom.HDLTestBench.runTest(HDLTestBench.java:1103)
	[java] Sat 20:59: ERROR:    at simplehdl.SimpleHDLSimRunner.main(SimpleHDLSimRunner.maxj:57)
	[java] Sat 20:59: ERROR: ----------------------------
	[java] Java Result: 1
all:
About quartus support for maxeler: 
	ln -sf "../../map/altera_quartus/MAX4MAIAPeripheryTop.qpf"


